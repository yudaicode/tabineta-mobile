# Tabineta Mobile - リリースまでのTODOリスト

**最終更新日**: 2025年10月24日

## 📊 実装進捗サマリー

### ✅ 完了した主要機能
- **認証システム**: Google OAuth実装完了、OAuth専用化対応
- **プロフィール編集**: 画像、ユーザー名、自己紹介等の編集機能実装
- **プロフィール画面**: タブ機能付き（投稿・ブックマーク・いいね一覧）
- **アカウント削除**: 二重確認付き削除機能実装
- **通知機能**: 既読管理、一括既読、未読バッジ表示
- **設定画面**: 通知設定、プライバシー設定、アカウント管理
- **旅行記作成**: 3ステップフォームで完全実装
- **旅行記編集**: 基本情報の編集機能実装
- **旅行記削除**: 確認ダイアログ付き削除機能実装
- **旅行記詳細**: アクティビティ、コメント、ソーシャル機能含む
- **アクティビティ管理**: 作成、削除、日付グループ表示
- **ソーシャル機能**: いいね、ブックマーク、コメント
- **旅行プランコピー**: プライバシー保護付き実装
- **探索機能**: キーワード検索、カテゴリーフィルター、ソート機能
- **タイムライン機能**: 人気と新着投稿の表示
- **デザインシステム**: Colors、Spacing、Typography等の統一
- **アニメーション**: ボタンタップフィードバック、いいねアニメーション、ローディング強化
- **レスポンシブデザイン**: 画面サイズ対応、スケーリング、向き検知
- **アクセシビリティ**: スクリーンリーダー対応、タッチターゲット最適化、コントラスト計算
- **他ユーザープロフィール**: プロフィール閲覧、旅行詳細からの遷移
- **フォロー機能**: フォロー/アンフォロー、フォロワー数表示、フォロワー/フォロー中一覧画面
- **プッシュ通知設定**: 通知許可リクエスト、設定保存、トークン取得
- **アクティビティ編集**: 詳細画面から直接編集可能、モーダルフォームで更新
- **フォロワー/フォロー中一覧**: ユーザー一覧表示、プロフィールへの遷移（NEW!）

### 🚧 実装中・準備中
- Apple Sign-In（UI完成、統合待ち）
- LINE Login（UI完成、統合待ち）
- Supabase RLS設定

### 📋 未着手の重要機能
- 探索・検索機能
- プロフィール編集
- フォロー機能
- 通知機能

---

## 目次
1. [機能開発](#1-機能開発)
2. [UI/UX改善](#2-uiux改善)
3. [テスト](#3-テスト)
4. [パフォーマンス最適化](#4-パフォーマンス最適化)
5. [セキュリティ](#5-セキュリティ)
6. [エラーハンドリング](#6-エラーハンドリング)
7. [ドキュメント整備](#7-ドキュメント整備)
8. [ビルド・デプロイ準備](#8-ビルドデプロイ準備)
9. [ストア申請準備](#9-ストア申請準備)
10. [リリース後対応](#10-リリース後対応)

---

## 1. 機能開発

### 1.1 認証機能
- [x] Google OAuthログイン（実装完了）
- [ ] Apple Sign-In（UI実装済み、統合は準備中）
- [ ] LINE Login（UI実装済み、統合は準備中）
- [N/A] メールアドレス/パスワード認証（OAuth専用化のため削除）
- [N/A] パスワードリセット機能（OAuth専用のため不要）
- [N/A] メールアドレス確認機能（OAuth専用のため不要）
- [x] プロフィール編集機能（完了）
  - [x] プロフィール画像のアップロード
  - [x] ユーザー名変更
  - [x] 表示名変更
  - [x] 自己紹介文の編集
  - [x] ウェブサイトの編集
- [x] アカウント削除機能（完了）
  - [x] 二重確認ダイアログ
  - [x] プロフィール削除
  - [x] 関連データの削除
- [x] OAuth専用ログイン画面の実装（完了）

### 1.2 旅行記（Trip）機能
- [x] 旅行記の作成（完了）
  - [x] タイトル入力
  - [x] 説明文入力
  - [x] カバー画像の設定
  - [x] 公開/非公開の設定
  - [x] 旅行期間の設定
  - [x] カテゴリー選択
  - [x] 人数設定
  - [x] 3ステップフォーム（基本情報→日程→スケジュール）
- [x] 旅行記の編集（完了）
  - [x] 基本情報の編集（タイトル、説明、カテゴリ、画像、人数、公開設定）
  - [ ] 日程の編集（準備中）
  - [x] アクティビティの編集（完了 - 詳細画面から直接編集）
- [x] 旅行記の削除（完了）
  - [x] 削除確認ダイアログ
  - [x] 所有者のみ削除可能
- [x] 旅行記一覧の表示（基本実装済み）
  - [x] 自分の旅行記一覧
  - [x] 他ユーザーの旅行記一覧
  - [ ] フィルタリング機能の追加
- [x] 旅行記詳細の表示（完了）
  - [x] 基本情報表示
  - [x] アクティビティ一覧表示
  - [x] コメント表示
  - [x] いいね数・ブックマーク数表示
  - [x] ソーシャルボタン（いいね、ブックマーク、コメント）
- [x] 旅行プランコピー機能（完了）
  - [x] ワンクリックでコピー
  - [x] 画像はプライバシー保護のため除外
  - [x] コピー先は自動的に非公開
  - [x] コピー後の編集可能

### 1.3 アクティビティ（Activity）機能
- [x] アクティビティの作成（完了）
  - [x] タイトル入力
  - [x] 時間設定
  - [x] 場所設定
  - [x] メモ（説明文）入力
  - [x] カテゴリー選択（観光、食事、宿泊など）
  - [x] 滞在時間設定
  - [x] 費用入力
  - [ ] 写真複数枚アップロード
- [x] アクティビティの編集（完了）
  - [x] 詳細画面から編集ボタンで起動
  - [x] モーダルフォームで編集
  - [x] 全フィールドの更新対応
- [x] アクティビティの削除（作成画面で実装済み）
- [ ] アクティビティの並び替え（ドラッグ&ドロップ）
- [x] アクティビティの日付ごとのグループ表示（完了）
- [x] アクティビティのタイムライン表示（詳細画面で実装済み）

### 1.4 ソーシャル機能
- [x] いいね機能（完了）
  - [x] いいねボタンの実装
  - [x] いいね数の表示
  - [x] いいね状態の切り替え
  - [x] 自分がいいねした旅行記一覧（プロフィールのいいねタブで実装済み）
  - [ ] いいね数のリアルタイム更新
- [x] ブックマーク機能（基本実装完了）
  - [x] ブックマークボタンの実装
  - [x] ブックマーク状態の切り替え
  - [x] ブックマーク一覧画面（タブで実装）
  - [x] ブックマーク解除機能
- [x] コメント機能（基本実装完了）
  - [x] コメント投稿
  - [x] コメント一覧表示
  - [x] コメント削除
  - [x] コメント数の表示
  - [ ] コメント編集
  - [ ] コメント通知
  - [ ] 返信機能（ネスト構造）
- [x] フォロー機能（完了）
  - [x] ユーザーをフォロー
  - [x] フォロー解除
  - [x] フォロー状態の確認
  - [x] フォロワー数・フォロー中の数の表示
  - [x] フォロワー一覧画面
  - [x] フォロー中一覧画面
  - [x] プロフィール画面からフォロワー/フォロー中一覧へのナビゲーション
  - [ ] フォロー通知

### 1.5 探索（Explore）機能
- [x] 旅行記の検索（完了）
  - [x] キーワード検索
  - [x] カテゴリー検索
- [x] フィルタリング機能（完了）
  - [x] 人数フィルター
  - [x] 日数フィルター
  - [x] カテゴリー指定
  - [x] 人気順・新着順ソート
- [x] 検索結果の表示（完了）
  - [x] 検索結果数の表示
  - [x] 空の状態の処理

### 1.6 タイムライン（ホーム）機能
- [x] 人気の旅行プラン表示（完了）
- [x] 最近の投稿表示（完了）
- [x] プルダウンでリフレッシュ（完了）
- [ ] フォロー中ユーザーの投稿一覧（フォロー機能実装後）
- [ ] 無限スクロール（ページネーション）

### 1.7 プロフィール機能
- [x] プロフィール画面の実装（完了）
  - [x] ユーザー情報表示
  - [x] 投稿数、フォロワー数、フォロー数表示
  - [x] 投稿一覧タブ
  - [x] ブックマークタブ
  - [x] いいね一覧タブ
  - [x] タブ切り替え機能
  - [x] 各タブの件数バッジ表示
- [x] 他ユーザーのプロフィール表示（完了）
  - [x] ユーザー情報の表示
  - [x] フォローボタン
  - [x] 投稿一覧といいね一覧のタブ
  - [x] 旅行詳細からのユーザープロフィール遷移
- [x] プロフィール編集画面（完了）

### 1.8 通知機能
- [x] 通知画面の実装（完了）
- [x] 通知の種類（完了）
  - [x] いいね通知
  - [x] コメント通知
  - [x] フォロー通知
  - [x] 返信通知（型定義済み）
- [x] 通知の既読管理（完了）
  - [x] 個別既読
  - [x] 一括既読
  - [x] 未読バッジ表示
  - [x] 未読数の自動更新（30秒ごと）
- [x] プッシュ通知の設定（完了）
  - [x] 通知設定のUI実装
  - [x] AsyncStorageでの設定保存
  - [x] プッシュ通知許可のリクエスト
  - [x] プッシュトークンの取得
  - [x] セットアップドキュメント作成
  - [ ] expo-notificationsのインストール（ユーザー側で実施）
  - [ ] サーバーへのプッシュトークン送信

### 1.9 設定機能
- [x] アプリ設定画面（完了）
  - [x] 通知設定（アプリ内・プッシュ）
  - [x] プライバシー設定（プロフィール公開）
  - [x] ブロックリスト（UI実装済み）
  - [ ] テーマ設定（ダーク/ライトモード）
  - [ ] 言語設定
- [x] アカウント設定（完了）
  - [N/A] パスワード変更（OAuth専用のため不要）
  - [N/A] メールアドレス変更（OAuth専用のため不要）
  - [x] プロフィール編集へのリンク
  - [x] ログアウト機能
  - [x] アカウント削除へのリンク
- [x] アプリ情報（完了）
  - [x] バージョン表示
  - [x] 利用規約（UI実装済み）
  - [x] プライバシーポリシー（UI実装済み）

---

## 2. UI/UX改善

### 2.1 デザインの統一
- [x] カラースキームの実装（完了）
  - [x] Colorsテーマ定義（primary, neutral, success等）
  - [x] Spacingシステム
  - [x] BorderRadiusシステム
  - [x] Shadowsシステム
  - [x] Typographyシステム
- [x] フォントサイズの統一（constants/theme.tsで管理）
- [x] ボタンスタイルの統一（共通Buttonコンポーネント実装済み）
- [x] カードデザインの統一（TripCard等で実装）
- [x] アイコンの統一（Ioniconsで統一）

### 2.2 アニメーション・トランジション
- [x] 画面遷移アニメーション（Expo Routerで実装済み）
- [x] ボタンのタップフィードバック（AnimatedButton実装）
- [x] ローディングアニメーション（LoadingSpinner強化）
- [x] いいねボタンのアニメーション（ポップエフェクト実装）
- [ ] モーダルの表示/非表示アニメーション（必要に応じて追加）

### 2.3 レスポンシブデザイン
- [x] レスポンシブユーティリティの実装（responsive.ts）
- [x] レスポンシブフックの実装（useResponsive）
- [x] ブレークポイントの定義
- [x] スケーリング関数の実装
- [x] 画面サイズ・向き検知機能の実装
- [ ] 小画面端末での表示確認（実機テスト必要）
- [ ] 大画面端末（タブレット）での表示確認（実機テスト必要）
- [ ] 横画面での表示確認（実機テスト必要）

### 2.4 アクセシビリティ
- [x] アクセシビリティユーティリティの実装（accessibility.ts）
- [x] スクリーンリーダー対応（accessibilityLabel/Hint実装）
- [x] タッチターゲットサイズの確保（最低44x44px）
- [x] アクセシビリティラベル生成関数の実装
- [x] カラーコントラスト計算機能の実装
- [x] AnimatedButtonへのアクセシビリティ対応
- [x] LikeButtonへのアクセシビリティ対応
- [ ] フォントサイズの拡大対応（テスト必要）
- [ ] 全コンポーネントへのアクセシビリティ対応の展開

### 2.5 ユーザーフィードバック
- [x] 成功時のトースト表示（react-native-toast-messageで実装済み）
- [x] エラー時のトースト表示（実装済み）
- [x] 処理中のローディング表示（LoadingSpinner実装済み）
- [x] 空状態の表示（実装済み）
- [ ] オフライン時の表示

### 2.6 画像の最適化
- [ ] 画像の圧縮
- [ ] 遅延読み込み（Lazy Loading）
- [ ] プレースホルダー画像の表示
- [ ] サムネイルの生成

---

## 3. テスト

### 3.1 単体テスト（Unit Test）
- [ ] ユーティリティ関数のテスト
- [ ] カスタムフックのテスト
- [ ] Zustandストアのテスト
- [ ] バリデーションロジックのテスト

### 3.2 コンポーネントテスト
- [ ] 共通コンポーネントのテスト
  - [ ] Button
  - [ ] Input
  - [ ] LoadingSpinner
  - [ ] TripCard
- [ ] ソーシャルコンポーネントのテスト
  - [ ] LikeButton
  - [ ] BookmarkButton
  - [ ] CommentForm

### 3.3 統合テスト（Integration Test）
- [ ] 認証フローのテスト
  - [ ] ログインフロー
  - [ ] 新規登録フロー
  - [ ] ログアウトフロー
- [ ] 旅行記作成フローのテスト
- [ ] コメント投稿フローのテスト

### 3.4 E2Eテスト（End-to-End Test）
- [ ] 主要なユーザーシナリオのテスト
  - [ ] 新規登録 → ログイン → 旅行記作成 → 投稿
  - [ ] 他ユーザーの投稿にいいね・コメント
  - [ ] プロフィール編集

### 3.5 手動テスト
- [ ] 実機テスト（Android）
- [ ] 実機テスト（iOS）※ iOSデバイスが必要
- [ ] 各画面の動作確認
- [ ] エッジケースの確認
  - [ ] ネットワークエラー時
  - [ ] セッション切れ時
  - [ ] 長文入力時
  - [ ] 大量データ読み込み時

---

## 4. パフォーマンス最適化

### 4.1 レンダリング最適化
- [ ] 不要な再レンダリングの削減
  - [ ] React.memo の使用
  - [ ] useMemo の使用
  - [ ] useCallback の使用
- [ ] リストの最適化
  - [ ] FlatList の windowSize 調整
  - [ ] getItemLayout の実装
  - [ ] keyExtractor の最適化

### 4.2 データフェッチング最適化
- [ ] React Query のキャッシュ戦略
  - [ ] staleTime の調整
  - [ ] cacheTime の調整
- [ ] ページネーションの実装
- [ ] プリフェッチの実装
- [ ] 楽観的更新（Optimistic Update）

### 4.3 画像最適化
- [ ] 画像の圧縮
- [ ] 適切な画像サイズの使用
- [ ] WebP形式の使用（対応している場合）
- [ ] 画像キャッシュの実装

### 4.4 バンドルサイズの最適化
- [ ] 不要な依存関係の削除
- [ ] Tree Shaking の確認
- [ ] コード分割の検討
- [ ] バンドルアナライザーの実行

### 4.5 起動時間の最適化
- [ ] スプラッシュスクリーンの最適化
- [ ] 初期データ読み込みの最小化
- [ ] 遅延初期化の検討

---

## 5. セキュリティ

### 5.1 認証・認可
- [x] セッション管理の実装（Zustand + Supabase Auth）
- [x] トークンの安全な保存（SecureStore for native, AsyncStorage for web）
- [x] トークンの自動更新（Supabaseが自動処理）
- [ ] 権限チェックの実装
- [x] OAuth認証の実装（Google完了、Apple/LINE準備中）

### 5.2 データの保護
- [x] 機密情報の暗号化（SecureStoreで実装済み）
- [x] APIキーの環境変数管理（.envファイルで管理）
- [x] .envファイルの.gitignore登録（確認済み）
- [ ] ユーザー入力のサニタイズ

### 5.3 API セキュリティ
- [ ] Supabase RLS（Row Level Security）の設定
  - [ ] trips テーブルのRLS
  - [ ] activities テーブルのRLS
  - [ ] comments テーブルのRLS
  - [ ] likes テーブルのRLS
  - [ ] bookmarks テーブルのRLS
- [ ] APIレート制限の確認
- [ ] SQL インジェクション対策

### 5.4 依存関係のセキュリティ
- [ ] 依存パッケージの脆弱性チェック
  - [ ] `npm audit` の実行
  - [ ] 脆弱性のある依存関係の更新
- [ ] 定期的な依存関係の更新計画

---

## 6. エラーハンドリング

### 6.1 エラーバウンダリ
- [x] ルートレベルのエラーバウンダリ（Expo Routerで実装済み）
- [ ] 重要なコンポーネントへのエラーバウンダリ追加

### 6.2 API エラーハンドリング
- [ ] ネットワークエラーの処理
- [ ] タイムアウトエラーの処理
- [ ] 認証エラーの処理（401, 403）
- [ ] サーバーエラーの処理（500系）
- [ ] わかりやすいエラーメッセージの表示

### 6.3 バリデーションエラー
- [ ] フォーム入力のバリデーション
- [ ] リアルタイムバリデーション
- [ ] エラーメッセージの表示

### 6.4 オフライン対応
- [ ] オフライン検知
- [ ] オフライン時のUI表示
- [ ] オフライン時の操作制限
- [ ] オンライン復帰時の同期

---

## 7. ドキュメント整備

### 7.1 技術ドキュメント
- [x] プロジェクト構成の解説（fileExplain.md）
- [ ] API仕様書
- [ ] データベーススキーマ図
- [ ] 環境構築手順書
- [ ] デプロイ手順書

### 7.2 ユーザー向けドキュメント
- [ ] 利用規約の作成
- [ ] プライバシーポリシーの作成
- [ ] ヘルプページの作成
- [ ] FAQの作成

### 7.3 README の充実
- [ ] プロジェクト概要
- [ ] 機能一覧
- [ ] 技術スタック
- [ ] セットアップ手順
- [ ] スクリーンショット

### 7.4 コメント・ドキュメンテーション
- [ ] 複雑なロジックへのコメント追加
- [ ] JSDoc コメントの追加
- [ ] TODO コメントの整理

---

## 8. ビルド・デプロイ準備

### 8.1 環境設定
- [ ] 本番環境の環境変数設定
  - [ ] EXPO_PUBLIC_SUPABASE_URL
  - [ ] EXPO_PUBLIC_SUPABASE_ANON_KEY
  - [ ] その他必要な環境変数
- [ ] ステージング環境の構築（オプション）

### 8.2 Android ビルド
- [ ] app.json の設定確認
  - [ ] package 名の確認
  - [ ] versionCode のインクリメント
  - [ ] version の更新
- [ ] キーストアの準備（既に作成済みか確認）
- [ ] Google Play Console の設定
  - [ ] アプリ登録
  - [ ] OAuth クライアントIDの設定
  - [ ] SHA1フィンガープリントの登録
- [ ] EAS Build の設定
  - [ ] eas.json の作成・設定
  - [ ] プロダクションビルドの実行
- [ ] APK/AAB のビルド確認

### 8.3 iOS ビルド（オプション）
- [ ] app.json の設定確認
  - [ ] bundleIdentifier の確認
  - [ ] version の更新
- [ ] Apple Developer アカウントの準備
- [ ] App Store Connect の設定
- [ ] EAS Build での iOS ビルド
- [ ] IPA のビルド確認

### 8.4 アセットの準備
- [ ] アプリアイコンの最終版
  - [ ] 512x512px（Google Play）
  - [ ] 1024x1024px（App Store）
- [ ] スプラッシュスクリーンの最終版
- [ ] フィーチャーグラフィック（Google Play用）
- [ ] スクリーンショット
  - [ ] 最低4枚（スマートフォン用）
  - [ ] タブレット用（オプション）

---

## 9. ストア申請準備

### 9.1 Google Play Store
- [ ] ストアリスティングの作成
  - [ ] アプリ名
  - [ ] 簡単な説明（80文字以内）
  - [ ] 詳細な説明（4000文字以内）
  - [ ] スクリーンショット（最低4枚）
  - [ ] フィーチャーグラフィック
  - [ ] アプリアイコン
- [ ] カテゴリの選択
- [ ] コンテンツレーティングの取得
- [ ] プライバシーポリシーのURL設定
- [ ] ターゲットユーザー・コンテンツの設定
- [ ] 価格と配信地域の設定
- [ ] 審査への提出

### 9.2 Apple App Store（オプション）
- [ ] App Store Connect でのアプリ登録
- [ ] メタデータの入力
  - [ ] アプリ名
  - [ ] サブタイトル
  - [ ] 説明文
  - [ ] キーワード
  - [ ] スクリーンショット
  - [ ] プレビュービデオ（オプション）
- [ ] 年齢レーティングの設定
- [ ] プライバシーポリシーのURL設定
- [ ] 審査への提出

### 9.3 ストア説明文の作成
- [ ] 魅力的なアプリ説明文の作成
  - [ ] 主要機能の説明
  - [ ] ターゲットユーザーへのアピール
  - [ ] ユニークな特徴の強調
- [ ] 多言語対応（オプション）
  - [ ] 英語
  - [ ] その他の言語

---

## 10. リリース後対応

### 10.1 モニタリング
- [ ] エラー監視ツールの導入
  - [ ] Sentry の設定（オプション）
  - [ ] Firebase Crashlytics の設定（オプション）
- [ ] アナリティクスの導入
  - [ ] Google Analytics の設定（オプション）
  - [ ] Mixpanel の設定（オプション）
- [ ] パフォーマンス監視

### 10.2 ユーザーフィードバック
- [ ] レビュー・評価の監視
- [ ] ユーザーからの問い合わせ対応体制
- [ ] フィードバックの収集方法

### 10.3 アップデート計画
- [ ] バグ修正の優先順位付け
- [ ] 新機能の開発ロードマップ
- [ ] 定期アップデートのスケジュール

### 10.4 マーケティング
- [ ] SNS での宣伝
- [ ] プレスリリース（オプション）
- [ ] コミュニティでの紹介
- [ ] ユーザー獲得戦略

---

## 優先度別タスク

### 🔴 最優先（リリース必須）
1. ✅ 旅行記の作成機能（完了）
2. ✅ 旅行記の詳細表示（完了）
3. ✅ アクティビティの作成機能（完了）
4. ✅ 認証機能の基本実装（Google OAuth完了）
5. ✅ 基本的なUI/UXデザインシステム（完了）
6. ✅ ソーシャル機能の基本実装（いいね、ブックマーク、コメント完了）
7. ✅ 旅行記の編集・削除機能（完了）
8. ⏳ Supabase RLS の設定
9. ⏳ Apple Sign-In / LINE Login の統合
10. ⏳ Android ビルドの成功
11. ⏳ Google Play Store へのリリース準備

### 🟡 高優先（早期実装が望ましい）
1. ✅ いいね・ブックマーク機能（基本完了）
2. ✅ コメント機能（基本完了）
3. ✅ 旅行プランコピー機能（完了）
4. ⏳ 探索（検索）機能
5. ⏳ プロフィール編集機能
6. ⏳ アクティビティ画像アップロード
7. ⏳ 画像の最適化
8. ⏳ パフォーマンス最適化
9. ⏳ テストの実装

### 🟢 中優先（リリース後でも可）
1. フォロー機能
2. 通知機能
3. アクセシビリティ対応
4. 多言語対応
5. iOS 対応

### ⚪ 低優先（長期的に検討）
1. プッシュ通知
2. ダークモード対応
3. オフライン対応
4. アニメーションの追加

---

## 進捗管理

各タスクの進捗を以下の形式で記録してください：

```
- [ ] 未着手
- [進行中] 作業中
- [x] 完了
- [保留] 保留中
- [N/A] 該当なし
```

---

## 次のアクション

1. **現在の機能開発状況を確認**
   - 既に実装済みの機能をチェック
   - 未実装の機能をリストアップ

2. **優先順位の決定**
   - 🔴最優先タスクから着手
   - リリース日から逆算してスケジュール作成

3. **週次レビュー**
   - 毎週進捗を確認
   - ブロッカーの特定と解決
   - 優先度の見直し

---

このTODOリストを基に、計画的にリリースに向けて進めていきましょう！
